<h1>Idiom # 90: Read-only outside</h1>

<p>See <a target="_blank" href="https://www.programming-idioms.org/idiom/90/read-only-outside">programming-idioms.org</a>:</p>

<h2>Code</h2>

<p>All fields in Fuzion are automatically read-only from inside and form
  outside.  So the task here is more to define a field that is mutable and a way to read this from the outside.</p>

<p>A mutable value has to be created using the <code>mutate</code>
effect. <code>mut</code> is a convenience feature to create a mutable value using the current mutate effect.</p>

<runcode file="../src/idiom90.fuzion"/>

<h2>Running Example</h2>

<p>Updating the field from inside does work:</p>

<runcode file="../src/idiom90ex.fz"/>

<p>If you analyze the effects used by this code by hitting 'Effects!', you will
see that this code uses the <code>mutate</code> effect.</p>

<p>Updating the field from outside will cause a compile-time error:</p>

<runcode file="../src/idiom90ex2.fz"/>

<p>In any case, the preferred way is not to update a field at all, but to create a new instance:</p>

<runcode file="../src/idiom90ex3.fz"/>

<p>Note that field <code>f</code> is not updated (which would require
the <code>set</code> keyword, but there are two fields called <code>f</code>
with a non-overlapping scope.</p>
